# ===========================================
# CONFIGURACION DEL AGENTE 3 - REGISTRO DIRECTO
# ===========================================
# Copiar este archivo como .env y configurar los valores
#
# Para desarrollo local (Mac/Linux via Tailscale):
# Copiar .env.local.example como .env.local y configurar

# --- Base de Datos SAV7 (SQL Server) ---
DB_SERVER=100.73.181.41
DB_PORT=1433
DB_DATABASE=DBSAV71A
DB_USERNAME=
DB_PASSWORD=
DB_DRIVER={ODBC Driver 17 for SQL Server}
DB_TRUSTED_CONNECTION=false
DB_TIMEOUT=30

# --- Matching de Productos ---
# Score minimo fuzzy para aceptar match (0-100)
UMBRAL_MATCH_PRODUCTO=90

# Score minimo para match en catalogo completo sin historial (0-100)
UMBRAL_MATCH_EXACTO=95

# Porcentaje minimo de conceptos que deben matchear para registrar (0-100)
MIN_CONCEPTOS_MATCH_PORCENTAJE=50

# Registrar facturas con match parcial (true/false)
REGISTRAR_PARCIALES=true

# --- Matching Avanzado (Paso 2.5: token_set + historial) ---
# Habilitar paso 2.5: token_set_ratio con desambiguacion por frecuencia historica
HABILITAR_TOKEN_SET_HISTORIAL=true

# Longitud minima de nombre para activar token_set_ratio
MIN_LONGITUD_TOKEN_SET=5

# --- Registro en ERP ---
# Estatus para nuevos registros Serie F
ESTATUS_REGISTRO=No Pagada

# Usuario del sistema para campo Comprador
USUARIO_SISTEMA=AGENTE3_SAT

# Sucursal por defecto
SUCURSAL=5

# --- Adjuntos CFDI (copia de XML/PDF a carpeta de red SAV7) ---
# Carpeta de red donde SAV7 espera los XMLs/PDFs
# CFDI_ADJUNTOS_DIR=\\SERVERMC\Asesoft\SAV7-1\Recepciones CFDI

# Habilitar copia de XML a carpeta de red (true/false)
CFDI_ADJUNTOS_HABILITADO=true

# Generar PDF desde XML usando satcfdi (true/false)
# Requiere: pip install satcfdi
CFDI_GENERAR_PDF=true

# --- Tablas de SAV7 ---
SAV7_TABLA_RECEPCIONES=SAVRecC
SAV7_TABLA_DETALLE=SAVRecD
SAV7_TABLA_PROVEEDORES=SAVProveedor
SAV7_TABLA_PRODUCTOS=SAVProducto

# --- Logging ---
LOG_LEVEL=INFO
